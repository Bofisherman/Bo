{% extends 'base.html' %}
{% block title %}Admin Dashboard - BO Fisherman{% endblock %}

{% block content %}
<div class="container">
  <h1>Admin Dashboard</h1>

  {% for cat in categories %}
    <div class="category-block">
      <h2>{{ cat['icon'] or '' }} {{ cat['name'] }}</h2>
      <p>{{ cat['description'] or '' }}</p>

      {% if category_lessons[cat['id']] %}
        <ul>
          {% for lesson in category_lessons[cat['id']] %}
            <li>
              <strong>{{ lesson['title'] }}</strong>
              <small>({{ lesson['media_type'] }})</small>
              — <a href="{{ lesson['media_url'] }}" target="_blank">Preview</a>
              — <a href="/admin/edit/{{ lesson['id'] }}">Edit</a>
              — <a href="/admin/delete/{{ lesson['id'] }}" onclick="return confirm('Delete this lesson?');">Delete</a>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p><em>No lessons yet.</em></p>
      {% endif %}

      <a href="/admin/upload?category_id={{ cat['id'] }}" class="button">+ Add Lesson</a>
      <hr>
    </div>
  {% endfor %}
</div>
{% endblock %}
